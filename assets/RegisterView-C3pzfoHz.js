import{o as t,g as o,h as e,_ as se,u as te,f as D,b as oe,d as y,e as ae,n as p,l as h,i as r,m as E,x as re,w as f,v as C,F as k,j as $,k as v,p as U,c as A,t as c,z as ne,q as M,s as j,A as P,B as F,y as ie,r as le,D as L}from"./index-BSOmwl3O.js";import{_ as de}from"./undraw_mailbox_re_dvds-D0cFtK3L.js";import{c as u,r as b,n as ce,e as ue,s as pe,u as me}from"./index-BSA5OD9w.js";import{r as H}from"./EyeIcon-XoNspOwo.js";import{r as N}from"./EyeSlashIcon-CI_an2lR.js";function ve(S,w){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function ge(S,w){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"})])}function fe(S,w){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 3.75H6.912a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859M12 3v8.25m0 0-3-3m3 3 3-3"})])}function he(S,w){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const we=["123456","123456789","qwerty","password","12345","12345678","111111","123123","abc123","password1","1234","000000","iloveyou","123","monkey","dragon","letmein","princess","qwertyuiop","admin","welcome","login","passw0rd","1q2w3e4r","starwars","football","123qwe","1qaz2wsx","sunshine","666666","654321","superman","asdfghjkl","qazwsx","michael","hunter","trustno1","freedom","whatever","letmein123","batman123@uthhA","jordan23"],be={class:"w-screen h-screen register-container p-5"},xe={class:"bg-slate-100 rounded grid place-content-between p-10"},ye={class:"form-steps__information form-steps"},ke={class:"step__icon rounded-lg"},$e={class:"step__icon rounded-lg"},_e={class:"step__icon rounded-lg"},Ce={class:"step__icon rounded-lg"},Me={class:"grid grid-flow-col gap-8"},Se={class:"bg-blue-300 grid place-content-center"},ze={key:0,class:"step-1 grid gap-8"},Ve={class:"form-group--fullname"},Ae={class:"form-group grid"},Re={key:0},De={class:"form-group grid"},Pe={key:0},qe={class:"form-group grid"},Ie={key:0},Be={class:"form-group grid"},Ee=["max"],Ue={key:0},je={key:1,class:"step-2 grid gap-8"},Fe={class:"form-group grid gap-3"},Le={key:0},He={class:"form-group grid gap-3"},Ne={class:"password-container"},Ze=["type"],Oe={key:0},Te={class:"text-error"},We={key:1},Ye={class:"strength-meter"},Ge={class:"form-group grid gap-3"},Je={class:"password-container"},Ke=["type"],Qe={key:0},Xe={class:"text-error"},es={key:2,class:"step-3 grid gap-8"},ss={key:3,class:"step-4 grid gap-8"},ts={class:"text-center"},os={class:"text-blue-500 font-semibold"},as={key:0},rs={key:1,class:"sk-chase w-8 h-8 mx-auto"},ns={type:"submit",class:"btn btn-primary grid grid-flow-col place-content-center place-items-end gap-4"},is={key:0},ls={key:1,class:"sk-chase w-8 h-8 mx-auto"},ds={__name:"RegisterView",setup(S){const w=te(),Z=u.regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_])[A-Za-z\d\W_]{12,}$/),q=u.regex(/^[a-zA-Z√°√©√≠√≥√∫√º√Å√â√ç√ì√ö√±√ë\s]+$/),O=l=>!we.includes(l),T=D(()=>{if(!i.birthdate)return!1;const l=new Date(i.birthdate),s=new Date(B.value);return l>s}),W={name:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",b),alphaWithSpaces:u.withMessage("Solo se permiten letras",q)},lastname:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",b),alphaWithSpaces:u.withMessage("Solo debe de contener letras",q)},phone:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",b),numeric:u.withMessage("Solo se permiten n√∫meros",ce)},emailR:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",b),email:u.withMessage("Debe ser un email v√°lido",ue)},birthdate:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",b),isTooYoung:u.withMessage("Necesitas ser mayor de edad para poder registrarte",()=>!T.value)},password:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",b),passwordRegex:u.withMessage("No cumple con los requisitos m√≠nimos",Z),isPasswordWeak:u.withMessage("Contrase√±a altamente d√©bil.",O)},repeatPassword:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",b),sameAs:u.withMessage("Las contrase√±as no coinciden",pe(D(()=>i.password)))}},i=oe({emailR:"",name:"",lastname:"",phone:"",birthdate:"",password:"",repeatPassword:""}),z=y(!1),V=y(!1),m=y({lowercaseUppercase:!1,number:!1,specialChar:!1,minLength:!1}),_=y(""),I=y(0),R=new Date,d=y(1),n=me(W,i),x=ae.useToast(),Y=()=>{const l=i.password;m.value.lowercaseUppercase=/[a-z]/.test(l)&&/[A-Z]/.test(l),m.value.number=/\d/.test(l),m.value.specialChar=/[!@#$%^&*]/.test(l),m.value.minLength=l.length>=12;const s=Object.values(m.value).filter(Boolean).length;I.value=s/4*100},G=async()=>{if(!(!i.password||i.password.length<12||n.value.password.$error))try{const s=(await F.post("/auth/check-pswd",{password:i.password})).data==="Comprometida";_.value=s?"Contrase√±a comprometida, por favor utiliza otra.":""}catch(l){console.error("Error verificando la contrase√±a:",l),_.value="Error verificando la contrase√±a"}},B=D(()=>{const l=R.getFullYear()-16,s=(R.getMonth()+1).toString().padStart(2,"0"),g=R.getDate().toString().padStart(2,"0");return`${l}-${s}-${g}`}),J=()=>{const{isInvalidForm:l,currentInvalidStep:s}=Q();l&&s===d.value||d.value<4&&d.value++},K=()=>{n.value.$reset(),d.value>1&&d.value<4&&d.value--},Q=()=>{if(d.value===1){n.value.name.$touch(),n.value.lastname.$touch(),n.value.phone.$touch(),n.value.birthdate.$touch();const l=!!n.value.$errors.length;return l?{isInvalidForm:l,currentInvalidStep:1}:!1}if(d.value===2){n.value.emailR.$touch(),n.value.password.$touch(),n.value.repeatPassword.$touch();const l=!!n.value.$errors.length;return l?{isInvalidForm:l,currentInvalidStep:2}:!1}return!1},X=async()=>{const{ok:l,message:s}=await w.register(i);if(!l){x.open({message:s,type:"error",duration:4e3,pauseOnHover:!0});return}x.open({message:"Cuenta creada correctamente üéâüéâüéâ",type:"success",duration:4e3,pauseOnHover:!0}),x.open({message:"Ahora un √∫ltimo paso antes de iniciar sesi√≥n...",type:"info",duration:5e3,pauseOnHover:!0}),d.value=4},ee=async()=>{var l,s;try{const g=await F.post("/auth/resend-verification-email",{email:i.emailR});if(console.log(g),g.status!==200)return;x.open({message:g.data.message,type:"success",duration:4e3,pauseOnHover:!0})}catch(g){if(g.status===400){x.open({message:(l=g.response.data)==null?void 0:l.message,type:"info",duration:4e3,pauseOnHover:!0}),ie.replace({name:"inicio-sesion"});return}x.open({message:(s=g.response.data)==null?void 0:s.message,type:"error",duration:4e3,pauseOnHover:!0})}};return(l,s)=>{const g=le("RouterLink");return t(),o("section",be,[e("aside",xe,[e("div",ye,[s[13]||(s[13]=e("h1",{class:"text-4xl font-bold mb-14"},"Olympus GYM",-1)),e("div",{class:p(["step step-container transition-all duration-700",{"opacity-50":d.value!=1}])},[e("div",ke,[h(r(he),{class:"size-7"})]),s[9]||(s[9]=e("div",{class:"step__information"},[e("h4",{class:"text-2xl font-bold text-slate-900"},"Informaci√≥n personal"),e("p",{class:"text-slate-800"}," Proporcione su nombre, apellidos, n√∫mero de tel√©fono y fecha de nacimiento. ")],-1))],2),e("div",{class:p(["step step-container transition-all duration-700",{"opacity-50":d.value!=2}])},[e("div",$e,[h(r(ge),{class:"size-7"})]),s[10]||(s[10]=e("div",{class:"step__information"},[e("h4",{class:"text-2xl font-bold text-slate-900"},"Credenciales de la Cuenta"),e("p",{class:"text-slate-600"}," Introduzca su correo electr√≥nico, elija una contrase√±a y conf√≠rmela. ")],-1))],2),e("div",{class:p(["step step-container transition-all duration-700",{"opacity-50":d.value!=3}])},[e("div",_e,[h(r(ve),{class:"size-7"})]),s[11]||(s[11]=e("div",{class:"step__information"},[e("h4",{class:"text-2xl font-bold text-slate-900"},"Confirmaci√≥n"),e("p",{class:"text-slate-600"}," Revise los detalles proporcionados antes de completar el registro. ")],-1))],2),e("div",{class:p(["step step-container transition-all duration-700",{"opacity-50":d.value!=4}])},[e("div",Ce,[h(r(fe),{class:"size-7"})]),s[12]||(s[12]=e("div",{class:"step__information"},[e("h4",{class:"text-2xl font-bold text-slate-900"},"Verificaci√≥n de email"),e("p",{class:"text-slate-600"}," Antes de iniciar sesi√≥n, necesitar√°s validar tu correo electr√≥nico. ")],-1))],2)]),e("div",Me,[h(g,{to:{name:"inicio"},class:"btn btn-outline flex place-content-center place-items-center gap-4"},{default:E(()=>[h(r(L),{class:"size-8"}),s[14]||(s[14]=M(" Volver al inicio "))]),_:1}),h(g,{to:{name:"inicio-sesion"},class:"btn btn-primary flex place-content-center place-items-center"},{default:E(()=>s[15]||(s[15]=[M("Iniciar sesi√≥n")])),_:1})])]),e("main",Se,[e("form",{onSubmit:re(X,["prevent"]),class:"bg-white rounded-md shadow form-container p-10"},[d.value===1?(t(),o("div",ze,[s[20]||(s[20]=e("div",{class:"grid gap-4 mb-8"},[e("h1",{class:"text-4xl font-semibold text-slate-900"},"Informaci√≥n personal"),e("p",{class:"text-3xl text-slate-800"}," Complete los campos para que podamos conocerte mejor. ")],-1)),e("div",Ve,[e("div",Ae,[s[16]||(s[16]=e("label",{for:"name"},"Nombre",-1)),f(e("input",{type:"text",placeholder:"Jane",class:p(["form-control",{"form-control--error":r(n).name.$error}]),id:"name","onUpdate:modelValue":s[0]||(s[0]=a=>i.name=a)},null,2),[[C,i.name,void 0,{trim:!0}]]),r(n).name.$error?(t(),o("span",Re,[(t(!0),o(k,null,$(r(n).name.$errors,a=>(t(),o("p",{key:a.$uid,class:"text-error"},c(a.$message),1))),128))])):v("",!0)]),e("div",De,[s[17]||(s[17]=e("label",{for:"lastname"},"Apellidos",-1)),f(e("input",{type:"text",placeholder:"Doe",class:p(["form-control",{"form-control--error":r(n).lastname.$error}]),id:"lastname","onUpdate:modelValue":s[1]||(s[1]=a=>i.lastname=a)},null,2),[[C,i.lastname,void 0,{trim:!0}]]),r(n).lastname.$error?(t(),o("span",Pe,[(t(!0),o(k,null,$(r(n).lastname.$errors,a=>(t(),o("p",{key:a.$uid,class:"text-error"},c(a.$message),1))),128))])):v("",!0)])]),e("div",qe,[s[18]||(s[18]=e("label",{for:"phone"},"Tel√©fono",-1)),f(e("input",{type:"text",placeholder:"8221234442",class:p(["form-control",{"form-control--error":r(n).phone.$error}]),id:"phone","onUpdate:modelValue":s[2]||(s[2]=a=>i.phone=a)},null,2),[[C,i.phone,void 0,{trim:!0}]]),r(n).phone.$error?(t(),o("span",Ie,[(t(!0),o(k,null,$(r(n).phone.$errors,a=>(t(),o("p",{key:a.$uid,class:"text-error"},c(a.$message),1))),128))])):v("",!0)]),e("div",Be,[s[19]||(s[19]=e("label",{for:"birthdate"},"Fecha de nacimiento:",-1)),f(e("input",{type:"date",class:p(["form-control",{"form-control--error":r(n).birthdate.$error}]),id:"birthdate",max:B.value,"onUpdate:modelValue":s[3]||(s[3]=a=>i.birthdate=a)},null,10,Ee),[[C,i.birthdate]]),r(n).birthdate.$error?(t(),o("span",Ue,[(t(!0),o(k,null,$(r(n).birthdate.$errors,a=>(t(),o("p",{key:a.$uid,class:"text-error"},c(a.$message),1))),128))])):v("",!0)])])):v("",!0),d.value===2?(t(),o("div",je,[s[24]||(s[24]=e("div",{class:"grid gap-4 mb-8"},[e("h1",{class:"text-4xl font-semibold text-slate-900"},"Credenciales de la Cuenta"),e("p",{class:"text-3xl text-slate-800"}," Aseg√∫rate de utilizar un correo v√°lido y una contrase√±a segura. ")],-1)),e("div",Fe,[s[21]||(s[21]=e("label",{for:"email"},"Correo electr√≥nico:",-1)),f(e("input",{type:"text",placeholder:"janedoe@outlook.com",class:p(["form-control",{"form-control--error":r(n).emailR.$error}]),id:"email","onUpdate:modelValue":s[4]||(s[4]=a=>i.emailR=a)},null,2),[[C,i.emailR,void 0,{trim:!0}]]),r(n).emailR.$error?(t(),o("span",Le,[(t(!0),o(k,null,$(r(n).emailR.$errors,a=>(t(),o("p",{key:a.$uid,class:"text-error"},c(a.$message),1))),128))])):v("",!0)]),e("div",He,[s[22]||(s[22]=e("label",{for:"password"},"Contrase√±a:",-1)),e("div",Ne,[f(e("input",{type:z.value?"text":"password",placeholder:"**********",class:p(["form-control",{"form-control--error":r(n).password.$error||_.value}]),"onUpdate:modelValue":s[5]||(s[5]=a=>i.password=a),onInput:Y,onBlur:G,id:"password"},null,42,Ze),[[U,i.password]]),e("button",{type:"button",onClick:s[6]||(s[6]=a=>z.value=!z.value),class:"toggle-btn bg-blue-100"},[z.value?(t(),A(r(N),{key:1,class:"icon-password size-8"})):(t(),A(r(H),{key:0,class:"icon-password size-8"}))])]),_.value.length?(t(),o("span",Oe,[e("p",Te,c(_.value),1)])):v("",!0),r(n).password.$error?(t(),o("span",We,[(t(!0),o(k,null,$(r(n).password.$errors,a=>(t(),o("p",{key:a.$uid,class:"text-error"},c(a.$message),1))),128))])):v("",!0),e("div",Ye,[e("div",{class:"strength-meter-fill",style:ne({width:I.value+"%"})},null,4)]),e("ul",null,[e("li",{class:p({passed:m.value.lowercaseUppercase})},c(m.value.lowercaseUppercase?"‚úî":"‚úñÔ∏è")+" Incluye may√∫sculas y min√∫sculas ",3),e("li",{class:p({passed:m.value.number})},c(m.value.number?"‚úî":"‚úñÔ∏è")+" Incluye un n√∫mero ",3),e("li",{class:p({passed:m.value.specialChar})},c(m.value.specialChar?"‚úî":"‚úñÔ∏è")+" Incluye un car√°cter especial (!@#$%^&*) ",3),e("li",{class:p({passed:m.value.minLength})},c(m.value.minLength?"‚úî":"‚úñÔ∏è")+" Debe contener al menos 12 car√°cteres ",3)])]),e("div",Ge,[s[23]||(s[23]=e("label",{for:"repeat-password"},"Confirmar contrase√±a:",-1)),e("div",Je,[f(e("input",{type:V.value?"text":"password",placeholder:"**********",class:p(["form-control",{"form-control--error":r(n).repeatPassword.$error}]),id:"repeat-password","onUpdate:modelValue":s[7]||(s[7]=a=>i.repeatPassword=a)},null,10,Ke),[[U,i.repeatPassword]]),e("button",{type:"button",onClick:s[8]||(s[8]=a=>V.value=!V.value),class:"toggle-btn bg-blue-100"},[V.value?(t(),A(r(N),{key:1,class:"icon-password size-8"})):(t(),A(r(H),{key:0,class:"icon-password size-8"}))])]),r(n).repeatPassword.$error?(t(),o("span",Qe,[e("p",Xe,c(r(n).repeatPassword.$errors[0].$message),1)])):v("",!0)])])):v("",!0),d.value===3?(t(),o("div",es,[s[25]||(s[25]=e("h2",{class:"text-4xl font-semibold"},"Confirmaci√≥n",-1)),s[26]||(s[26]=e("p",{class:"text-3xl"},"Revise los detalles proporcionados antes de completar el registro.",-1)),e("ul",null,[e("li",null,"Nombre: "+c(i.name),1),e("li",null,"Apellidos: "+c(i.lastname),1),e("li",null,"Tel√©fono: "+c(i.phone),1),e("li",null,"Fecha de nacimiento: "+c(i.birthdate),1),e("li",null,"Correo electr√≥nico: "+c(i.emailR),1)])])):v("",!0),d.value===4?(t(),o("div",ss,[s[30]||(s[30]=e("h2",{class:"text-4xl font-semibold"},"Verificaci√≥n de Email",-1)),s[31]||(s[31]=e("p",{class:"text-3xl"}," Antes de iniciar sesi√≥n, necesitar√°s validar tu correo electr√≥nico. ",-1)),s[32]||(s[32]=e("img",{src:de,alt:"Mailbox",class:"size-56 mx-auto"},null,-1)),e("p",ts,[s[27]||(s[27]=M(" Hemos enviado un correo a ")),e("span",os,c(i.emailR),1),s[28]||(s[28]=M(" para confirmar la validez de tu correo electr√≥nico. "))]),s[33]||(s[33]=e("p",{class:"text-center"},"Si no recibiste ning√∫n correo, da clic en reenviar c√≥digo.",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:ee},[r(w).isChecking?(t(),o("div",rs,s[29]||(s[29]=[j('<div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div>',6)]))):(t(),o("span",as,"Reenviar correo de confirmaci√≥n"))])])):v("",!0),d.value<4?(t(),o("div",{key:4,class:p(["form-button",{"form-button--two-columns":d.value>1}])},[f(e("button",{type:"button",onClick:K,class:"btn btn-outline grid grid-flow-col place-content-center place-items-end gap-4"},[h(r(L),{class:"size-8"}),s[34]||(s[34]=M(" Anterior "))],512),[[P,d.value>1]]),f(e("button",{type:"button",onClick:J,class:"btn btn-primary grid grid-flow-col place-content-center place-items-end gap-4"}," Siguiente ",512),[[P,d.value<3]]),f(e("button",ns,[r(w).isChecking?(t(),o("div",ls,s[35]||(s[35]=[j('<div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div><div class="sk-chase-dot" data-v-9f9c5e9f></div>',6)]))):(t(),o("span",is,"Crear cuenta"))],512),[[P,d.value===3]])],2)):v("",!0)],32)])])}}},gs=se(ds,[["__scopeId","data-v-9f9c5e9f"]]);export{gs as default};
