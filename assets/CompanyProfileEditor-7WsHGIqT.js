import{d as M,b as W,e as B,I,f as S,a as O,g as r,h as s,t as c,k as u,w as m,v as f,n as y,i,F as b,j as h,s as E,B as T,o as a,l as G}from"./index-rJ-izXVI.js";import{c as n,r as v,n as D,e as J,u as Z}from"./index-BhA9_jAP.js";import{r as H}from"./TrashIcon-BvNibPXC.js";const X={key:0,class:"bg-white rounded shadow p-12 md:w-2/3 lg:w-2/3 xl:w-1/2 mx-auto"},Y={class:"mb-6"},K={class:"flex items-center justify-center"},Q={key:0,class:"w-48 h-48 flex items-center justify-center mb-2"},ee=["src"],se={key:1,class:"w-48 h-48 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center mb-2"},oe={key:0,class:"text-red-500 mt-1"},te={class:"mb-6"},re={class:"text-lg text-gray-500 mt-1"},ae={key:0},le={class:"mb-6"},ie={class:"text-lg text-gray-500 mt-1"},de={key:0},ne={class:"mb-6"},ce={class:"mb-4"},ue={key:0},pe={class:"grid md:grid-cols-2 gap-4 mb-4"},ge={key:0},me={key:0},fe={class:"grid grid-cols-2 gap-4 mb-4"},ye={key:0},be={class:"mb-4"},he={key:0},ve={key:0,class:"text-red-500 mt-1"},$e={class:"mb-6 grid gap-4"},xe=["onUpdate:modelValue"],ke={key:0},we={class:"flex-grow grid col-span-6"},_e=["onUpdate:modelValue","disabled"],Me={key:0},Ce=["onClick"],Se=["disabled"],Ee={key:0},Te={key:1,class:"sk-chase w-8 h-8 mx-auto"},De={key:1,class:"h-screen place-content-center"},Pe={__name:"CompanyProfileEditor",setup(Ve){const x=M(!1),k=M(!1),V=n.regex(/^\d{5}$/),w=n.regex(/^[a-zA-ZáéíóúüÁÉÍÓÚñÑ\s]+$/),U=n.regex(/^[a-zA-ZáéíóúÁÉÍÓÚñÑüÜ0-9\s.,;:¿?¡!()\-"'/+*=$]+$/),F=n.regex(/^[a-zA-ZáéíóúÁÉÍÓÚüÜñÑ0-9\s.,\-/()]+$/),q={pageTitle:{$autoDirty:!0,required:n.withMessage("Este campo es obligatorio",v),alphaWithSpaces:n.withMessage("Solo debe de contener letras",w)},slogan:{$autoDirty:!0,required:n.withMessage("Este campo es obligatorio",v),alphaWithSpaces:n.withMessage("Algunos caracteres ingresados no están permitidos. Solo se permiten letras, números y signos de puntuación comunes.",U)},address:{address:{$autoDirty:!0,required:n.withMessage("Este campo es obligatorio",v),alphaWithSpaces:n.withMessage("Caracteres no permitidos: @, #, $, *, &, %. Usa solo letras, números y puntuación básica.",F)},city:{$autoDirty:!0,required:n.withMessage("Este campo es obligatorio",v),alphaWithSpaces:n.withMessage("Solo debe de contener letras",w)},state:{$autoDirty:!0,required:n.withMessage("Este campo es obligatorio",v),alphaWithSpaces:n.withMessage("Solo debe de contener letras",w)},postalCode:{$autoDirty:!0,required:n.withMessage("Este campo es obligatorio",v),numeric:n.withMessage("Solo se permiten números",D),zipCode:n.withMessage("Ingresa un código postal correcto.",V)}},emailContact:{$autoDirty:!0,required:n.withMessage("Este campo es obligatorio",v),email:n.withMessage("Debe ser un email válido",J)},phone:{$autoDirty:!0,required:n.withMessage("Este campo es obligatorio",v),numeric:n.withMessage("Solo se permiten números",D)},socialMedia:{$each:n.forEach({$autoDirty:!0,social_name:{required:n.withMessage("Este campo es obligatorio",v),alphaWithSpaces:n.withMessage("Este campo solo puede contener letras",w)},social_url:{required:n.withMessage("Este campo es obligatorio",v)}})}},$=M(""),_=M(""),t=W({id:"",logoFile:"",pageTitle:"",slogan:"",address:{address:"",city:"",postalCode:"",state:""},emailContact:"",phone:"",socialMedia:[{social_name:"",social_url:""}]}),l=Z(q,t),C=B.useToast(),P=d=>{const e=d.target.files[0];if(e)if(e.size>2*1024*1024)$.value="El tamaño del archivo no debe exceder 2MB",t.logoFile="";else if(!["image/jpeg","image/png"].includes(e.type))$.value="El archivo debe ser JPEG o PNG",t.logoFile="";else{$.value="";const o=new FileReader;o.onload=p=>{t.logoFile=e,_.value=p.target.result},o.readAsDataURL(e)}};I(()=>t.pageTitle,d=>{document.title=d.length>3?d:"Olympus GYM"});const z=S(()=>t.pageTitle.length),N=S(()=>t.slogan.length),j=()=>{console.log(l.value.socialMedia),t.socialMedia.push({social_name:"",social_url:""})},A=d=>{t.socialMedia.length>1&&t.socialMedia.splice(d,1)},L=async()=>{if(l.value.$touch(),l.value.$invalid)return;const d=new FormData;d.append("id",t.id),d.append("pageTitle",t.pageTitle),d.append("slogan",t.slogan),d.append("email",t.emailContact),d.append("phoneNumber",t.phone),t.logoFile&&d.append("logoFile",t.logoFile),d.append("address",JSON.stringify(t.address)),d.append("socialMedia",JSON.stringify(t.socialMedia));try{k.value=!0;const{data:e}=await T.post("/settings/company-profile",d,{headers:{"Content-Type":"multipart/form-data"}});if(e.logo_updated){const o=document.querySelector("link[rel~='icon']");o.href=e.logo_updated.thumbnail_url}C.open({message:e.message,type:"success",duration:4e3,pauseOnHover:!0}),k.value=!1}catch(e){k.value=!1;const o=e.response.data.message;C.open({message:o,type:"success",duration:4e3,pauseOnHover:!0})}},R=async()=>{try{x.value=!0;const{data:d}=await T.get("/settings/company-profile");_.value=d.logo_url,t.id=d.id,t.pageTitle=d.page_title,t.slogan=d.slogan,t.address.address=d.address,t.address.city=d.city,t.address.state=d.state,t.address.postalCode=d.postal_code,t.emailContact=d.email,t.phone=parseInt(d.phone_number),t.socialMedia=d.social||[],x.value=!1}catch(d){x.value=!1,console.error("Error al obtener los datos del perfil de la empresa:",d)}};return O(()=>{R()}),(d,e)=>x.value?(a(),r("div",De,e[23]||(e[23]=[E('<div class="sk-chase w-24 h-24 mx-auto"><div class="sk-chase-dot before:bg-slate-900"></div><div class="sk-chase-dot before:bg-slate-900"></div><div class="sk-chase-dot before:bg-slate-900"></div><div class="sk-chase-dot before:bg-slate-900"></div><div class="sk-chase-dot before:bg-slate-900"></div><div class="sk-chase-dot before:bg-slate-900"></div></div>',1)]))):(a(),r("div",X,[e[22]||(e[22]=s("h1",{class:"text-4xl font-semibold mb-6"},"Editar Perfil de Empresa",-1)),s("div",Y,[s("div",K,[_.value||t.logoFile?(a(),r("div",Q,[s("img",{src:_.value||t.logoFile,alt:"Logo Preview",class:"max-w-full max-h-full object-contain"},null,8,ee)])):(a(),r("div",se,e[8]||(e[8]=[s("span",{class:"text-gray-500 text-center"},"Sin Logo",-1)])))]),e[9]||(e[9]=s("label",{for:"logo",class:"block text-gray-700 mb-1"},"Selecciona tu logo",-1)),s("input",{id:"logo",type:"file",accept:"image/jpeg,image/png",onChange:P,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"},null,32),$.value?(a(),r("p",oe,c($.value),1)):u("",!0)]),s("div",te,[e[10]||(e[10]=s("label",{for:"pageTitle",class:"block text-gray-700 mb-1"},"Título de la página",-1)),m(s("input",{id:"pageTitle","onUpdate:modelValue":e[0]||(e[0]=o=>t.pageTitle=o),type:"text",class:y(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",{"form-control--error":i(l).pageTitle.$error}]),maxlength:"30"},null,2),[[f,t.pageTitle]]),s("p",re,c(z.value)+"/30 caracteres",1),i(l).pageTitle.$error?(a(),r("span",ae,[(a(!0),r(b,null,h(i(l).pageTitle.$errors,o=>(a(),r("p",{key:o.$uid,class:"text-error"},c(o.$message),1))),128))])):u("",!0)]),s("div",le,[e[11]||(e[11]=s("label",{for:"slogan",class:"block text-gray-700 mb-1"},"Slogan",-1)),m(s("input",{id:"slogan","onUpdate:modelValue":e[1]||(e[1]=o=>t.slogan=o),type:"text",class:y(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",{"form-control--error":i(l).slogan.$error}])},null,2),[[f,t.slogan]]),s("p",ie,c(N.value)+"/100 caracteres",1),i(l).slogan.$error?(a(),r("span",de,[(a(!0),r(b,null,h(i(l).slogan.$errors,o=>(a(),r("p",{key:o.$uid,class:"text-error"},c(o.$message),1))),128))])):u("",!0)]),s("div",ne,[e[19]||(e[19]=s("h2",{class:"text-4xl font-medium mb-2"},"Datos de contacto",-1)),s("div",ce,[e[12]||(e[12]=s("label",{for:"address",class:"block text-gray-700 mb-1"},"Dirección",-1)),m(s("input",{id:"address","onUpdate:modelValue":e[2]||(e[2]=o=>t.address.address=o),type:"text",class:y(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",{"form-control--error":i(l).address.city.$error}])},null,2),[[f,t.address.address,void 0,{trim:!0}]]),i(l).address.address.$error?(a(),r("span",ue,[(a(!0),r(b,null,h(i(l).address.address.$errors,o=>(a(),r("p",{key:o.$uid,class:"text-error"},c(o.$message),1))),128))])):u("",!0)]),s("div",pe,[s("div",null,[e[13]||(e[13]=s("label",{for:"city",class:"block text-gray-700 mb-1"},"Ciudad",-1)),m(s("input",{id:"city","onUpdate:modelValue":e[3]||(e[3]=o=>t.address.city=o),type:"text",class:y(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",{"form-control--error":i(l).address.city.$error}])},null,2),[[f,t.address.city]]),i(l).address.city.$error?(a(),r("span",ge,[(a(!0),r(b,null,h(i(l).address.city.$errors,o=>(a(),r("p",{key:o.$uid,class:"text-error"},c(o.$message),1))),128))])):u("",!0)]),s("div",null,[e[14]||(e[14]=s("label",{for:"state",class:"block text-gray-700 mb-1"},"Estado/Provincia/Región",-1)),m(s("input",{id:"state","onUpdate:modelValue":e[4]||(e[4]=o=>t.address.state=o),type:"text",class:y(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",{"form-control--error":i(l).address.state.$error}])},null,2),[[f,t.address.state]]),i(l).address.state.$error?(a(),r("span",me,[(a(!0),r(b,null,h(i(l).address.state.$errors,o=>(a(),r("p",{key:o.$uid,class:"text-error"},c(o.$message),1))),128))])):u("",!0)])]),s("div",fe,[s("div",null,[e[15]||(e[15]=s("label",{for:"postalCode",class:"block text-gray-700 mb-1"},"Código Postal",-1)),m(s("input",{id:"postalCode","onUpdate:modelValue":e[5]||(e[5]=o=>t.address.postalCode=o),type:"text",class:y(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",{"form-control--error":i(l).address.postalCode.$error}])},null,2),[[f,t.address.postalCode]]),i(l).address.postalCode.$error?(a(),r("span",ye,[(a(!0),r(b,null,h(i(l).address.postalCode.$errors,o=>(a(),r("p",{key:o.$uid,class:"text-error"},c(o.$message),1))),128))])):u("",!0)]),e[16]||(e[16]=s("div",null,[s("label",{for:"country",class:"block text-gray-700 mb-1"},"País"),s("select",{id:"country",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:"true"},[s("option",{value:"MX",selected:"selected",disabled:"true"},"México")])],-1))]),s("div",be,[e[17]||(e[17]=s("label",{for:"email",class:"block text-gray-700 mb-1"},"Correo electrónico",-1)),m(s("input",{id:"email","onUpdate:modelValue":e[6]||(e[6]=o=>t.emailContact=o),type:"email",class:y(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",{"form-control--error":i(l).emailContact.$error}])},null,2),[[f,t.emailContact]]),i(l).emailContact.$error?(a(),r("span",he,[(a(!0),r(b,null,h(i(l).emailContact.$errors,o=>(a(),r("p",{key:o.$uid,class:"text-error"},c(o.$message),1))),128))])):u("",!0)]),s("div",null,[e[18]||(e[18]=s("label",{for:"phone",class:"block text-gray-700 mb-1"},"Teléfono",-1)),m(s("input",{id:"phone","onUpdate:modelValue":e[7]||(e[7]=o=>t.phone=o),type:"tel",maxlength:"10",class:y(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",{"form-control--error":i(l).phone.$error}])},null,2),[[f,t.phone]]),i(l).phone.$error?(a(),r("p",ve,c(i(l).phone.numeric.$message),1)):u("",!0)])]),s("div",$e,[e[20]||(e[20]=s("h2",{class:"font-medium mb-2"},"Redes Sociales",-1)),(a(!0),r(b,null,h(t.socialMedia,(o,p)=>(a(),r("div",{key:p,class:"flex items-start gap-3 mb-2 flex-wrap"},[s("div",null,[m(s("input",{"onUpdate:modelValue":g=>o.social_name=g,type:"url",placeholder:"Red social",class:y(["focus:outline-none mr-2 px-3 py-2 border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-green-500",{"form-control--error":i(l).socialMedia.$each.$response.$errors[p].social_name.length}])},null,10,xe),[[f,o.social_name]]),i(l).socialMedia.$each.$response.$errors[p].social_name.length?(a(),r("span",ke,[(a(!0),r(b,null,h(i(l).socialMedia.$each.$response.$errors[p].social_name,g=>(a(),r("p",{key:g,class:"text-error"},c(g.$message),1))),128))])):u("",!0)]),s("div",we,[m(s("input",{"onUpdate:modelValue":g=>o.social_url=g,type:"url",placeholder:"Introduce la URL de tu red social",class:y(["focus:outline-none mr-2 px-3 py-2 border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-green-500",{"form-control--error":i(l).socialMedia.$each.$response.$errors[p].social_url.length}]),disabled:o.social_name.length<3},null,10,_e),[[f,o.social_url]]),i(l).socialMedia.$each.$response.$errors[p].social_url.length?(a(),r("span",Me,[(a(!0),r(b,null,h(i(l).socialMedia.$each.$response.$errors[p].social_url,g=>(a(),r("p",{key:g,class:"text-error"},c(g.$message),1))),128))])):u("",!0)]),s("button",{onClick:g=>A(p),class:"text-red-500 hover:text-red-700 place-self-center"},[G(i(H),{class:"size-8"})],8,Ce)]))),128)),s("button",{onClick:j,class:"mt-2 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 place-self-end"}," Añadir red social ")]),s("button",{onClick:L,class:"w-full btn btn-primary disabled:cursor-not-allowed disabled:opacity-65 disabled:hover:text-white",disabled:i(l).$invalid},[k.value?(a(),r("div",Te,e[21]||(e[21]=[E('<div class="sk-chase-dot"></div><div class="sk-chase-dot"></div><div class="sk-chase-dot"></div><div class="sk-chase-dot"></div><div class="sk-chase-dot"></div><div class="sk-chase-dot"></div>',6)]))):(a(),r("span",Ee,"Guardar cambios"))],8,Se)]))}};export{Pe as default};
