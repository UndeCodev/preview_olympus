import{o as t,c as o,h as e,u as Q,g as R,d as X,e as M,f as ee,n as p,a as f,i,p as I,q as se,w as h,v as S,F as y,j as k,k as v,x as E,t as c,y as te,l as V,m as j,z,A as B,s as oe,r as ae}from"./index-qKey4Usj.js";import{c as u,r as x,n as re,e as ne,s as ie,u as le}from"./index-CGyo6h6J.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ce="/preview_olympus/assets/undraw_mailbox_re_dvds-q0CWimCl.svg",ue=["123456","123456789","qwerty","password","12345","12345678","111111","123123","abc123","password1","1234","000000","iloveyou","123","monkey","dragon","letmein","princess","qwertyuiop","admin","welcome","login","passw0rd","1q2w3e4r","starwars","football","123qwe","1qaz2wsx","sunshine","666666","654321","superman","asdfghjkl","qazwsx","michael","hunter","trustno1","freedom","whatever","letmein123","batman123@uthhA","jordan23"];function U(_,w){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function pe(_,w){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function me(_,w){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"})])}function ve(_,w){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 3.75H6.912a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859M12 3v8.25m0 0-3-3m3 3 3-3"})])}function ge(_,w){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const he={class:"w-screen h-screen register-container p-5"},we={class:"bg-slate-100 rounded grid place-content-between p-10"},fe={class:"form-steps__information form-steps"},xe={class:"step__icon rounded-lg"},be={class:"step__icon rounded-lg"},ye={class:"step__icon rounded-lg"},ke={class:"step__icon rounded-lg"},_e={class:"grid grid-flow-col gap-8"},$e={class:"bg-blue-300 grid place-content-center"},Ce={key:0,class:"step-1 grid gap-8"},Me={class:"form-group--fullname"},Se={class:"form-group grid"},Ve={key:0},Ae={class:"form-group grid"},Re={key:0},ze={class:"form-group grid"},De={key:0},Pe={class:"form-group grid"},qe=["max"],Ie={key:0},Ee={key:1,class:"step-2 grid gap-8"},je={class:"form-group grid gap-3"},Be={key:0},Ue={class:"form-group grid gap-3"},Fe={class:"password-container"},Le=["type"],He={key:0},Ne={class:"text-error"},Oe={key:1},Ze={class:"strength-meter"},We={class:"form-group grid gap-3"},Te=["type"],Ye={key:0},Ge={class:"text-error"},Je={key:2,class:"step-3 grid gap-8"},Ke={key:3,class:"step-4 grid gap-8"},Qe={class:"text-center"},Xe={class:"text-blue-500 font-semibold"},es={key:0},ss={key:1,class:"sk-chase w-8 h-8 mx-auto"},ts={type:"submit",class:"btn btn-primary grid grid-flow-col place-content-center place-items-end gap-4"},os={key:0},as={key:1,class:"sk-chase w-8 h-8 mx-auto"},rs={__name:"RegisterView",setup(_){const w=Q(),F=u.regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_])[A-Za-z\d\W_]{12,}$/),D=u.regex(/^[a-zA-ZáéíóúüÁÉÍÓÚñÑ\s]+$/),L=l=>!ue.includes(l),H=R(()=>{if(!n.birthdate)return!1;const l=new Date(n.birthdate),s=new Date(q.value);return l>s}),N={name:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",x),alphaWithSpaces:u.withMessage("Solo se permiten letras",D)},lastname:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",x),alphaWithSpaces:u.withMessage("Solo debe de contener letras",D)},phone:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",x),numeric:u.withMessage("Solo se permiten números",re)},emailR:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",x),email:u.withMessage("Debe ser un email válido",ne)},birthdate:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",x),isTooYoung:u.withMessage("Necesitas ser mayor de edad para poder registrarte",()=>!H.value)},password:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",x),passwordRegex:u.withMessage("No cumple con los requisitos mínimos",F),isPasswordWeak:u.withMessage("Contraseña altamente débil.",L)},repeatPassword:{$autoDirty:!0,required:u.withMessage("Este campo es obligatorio",x),sameAs:u.withMessage("Las contraseñas no coinciden",ie(R(()=>n.password)))}},n=X({emailR:"",name:"",lastname:"",phone:"",birthdate:"",password:"",repeatPassword:""}),$=M(!1),m=M({lowercaseUppercase:!1,number:!1,specialChar:!1,minLength:!1}),C=M(""),P=M(0),A=new Date,d=M(1),a=le(N,n),b=ee.useToast(),O=()=>{$.value=!$.value},Z=()=>{const l=n.password;m.value.lowercaseUppercase=/[a-z]/.test(l)&&/[A-Z]/.test(l),m.value.number=/\d/.test(l),m.value.specialChar=/[!@#$%^&*]/.test(l),m.value.minLength=l.length>=12;const s=Object.values(m.value).filter(Boolean).length;P.value=s/4*100},W=async()=>{if(!(!n.password||n.password.length<12||a.value.password.$error))try{const s=(await B.post("/auth/check-pswd",{password:n.password})).data==="Comprometida";C.value=s?"Contraseña comprometida, por favor utiliza otra.":""}catch(l){console.error("Error verificando la contraseña:",l),C.value="Error verificando la contraseña"}},q=R(()=>{const l=A.getFullYear()-16,s=(A.getMonth()+1).toString().padStart(2,"0"),g=A.getDate().toString().padStart(2,"0");return`${l}-${s}-${g}`}),T=()=>{const{isInvalidForm:l,currentInvalidStep:s}=G();l&&s===d.value||d.value<4&&d.value++},Y=()=>{a.value.$reset(),d.value>1&&d.value<4&&d.value--},G=()=>{if(d.value===1){a.value.name.$touch(),a.value.lastname.$touch(),a.value.phone.$touch(),a.value.birthdate.$touch();const l=!!a.value.$errors.length;return l?{isInvalidForm:l,currentInvalidStep:1}:!1}if(d.value===2){a.value.emailR.$touch(),a.value.password.$touch(),a.value.repeatPassword.$touch();const l=!!a.value.$errors.length;return l?{isInvalidForm:l,currentInvalidStep:2}:!1}return!1},J=async()=>{const{ok:l,message:s}=await w.register(n);if(!l){b.open({message:s,type:"error",duration:4e3,pauseOnHover:!0});return}b.open({message:"Cuenta creada correctamente 🎉🎉🎉",type:"success",duration:4e3,pauseOnHover:!0}),b.open({message:"Ahora un último paso antes de iniciar sesión...",type:"info",duration:5e3,pauseOnHover:!0}),d.value=4},K=async()=>{var l,s;try{const g=await B.post("/auth/resend-verification-email",{email:n.emailR});if(console.log(g),g.status!==200)return;b.open({message:g.data.message,type:"success",duration:4e3,pauseOnHover:!0})}catch(g){if(g.status===400){b.open({message:(l=g.response.data)==null?void 0:l.message,type:"info",duration:4e3,pauseOnHover:!0}),oe.replace({name:"inicio-sesion"});return}b.open({message:(s=g.response.data)==null?void 0:s.message,type:"error",duration:4e3,pauseOnHover:!0})}};return(l,s)=>{const g=ae("RouterLink");return t(),o("section",he,[e("aside",we,[e("div",fe,[s[11]||(s[11]=e("h1",{class:"text-4xl font-bold mb-14"},"Olympus GYM",-1)),e("div",{class:p(["step step-container transition-all duration-700",{"opacity-50":d.value!=1}])},[e("div",xe,[f(i(ge),{class:"size-7"})]),s[7]||(s[7]=e("div",{class:"step__information"},[e("h4",{class:"text-2xl font-bold text-slate-900"},"Información personal"),e("p",{class:"text-slate-800"}," Proporcione su nombre, apellidos, número de teléfono y fecha de nacimiento. ")],-1))],2),e("div",{class:p(["step step-container transition-all duration-700",{"opacity-50":d.value!=2}])},[e("div",be,[f(i(me),{class:"size-7"})]),s[8]||(s[8]=e("div",{class:"step__information"},[e("h4",{class:"text-2xl font-bold text-slate-900"},"Credenciales de la Cuenta"),e("p",{class:"text-slate-600"}," Introduzca su correo electrónico, elija una contraseña y confírmela. ")],-1))],2),e("div",{class:p(["step step-container transition-all duration-700",{"opacity-50":d.value!=3}])},[e("div",ye,[f(i(pe),{class:"size-7"})]),s[9]||(s[9]=e("div",{class:"step__information"},[e("h4",{class:"text-2xl font-bold text-slate-900"},"Confirmación"),e("p",{class:"text-slate-600"}," Revise los detalles proporcionados antes de completar el registro. ")],-1))],2),e("div",{class:p(["step step-container transition-all duration-700",{"opacity-50":d.value!=4}])},[e("div",ke,[f(i(ve),{class:"size-7"})]),s[10]||(s[10]=e("div",{class:"step__information"},[e("h4",{class:"text-2xl font-bold text-slate-900"},"Verificación de email"),e("p",{class:"text-slate-600"}," Antes de iniciar sesión, necesitarás validar tu correo electrónico. ")],-1))],2)]),e("div",_e,[f(g,{to:{name:"inicio"},class:"btn btn-outline flex place-content-center place-items-center gap-4"},{default:I(()=>[f(i(U),{class:"size-8"}),s[12]||(s[12]=V(" Volver al inicio "))]),_:1}),f(g,{to:{name:"inicio-sesion"},class:"btn btn-primary flex place-content-center place-items-center"},{default:I(()=>s[13]||(s[13]=[V("Iniciar sesión")])),_:1})])]),e("main",$e,[e("form",{onSubmit:se(J,["prevent"]),class:"bg-white rounded-md shadow form-container p-10"},[d.value===1?(t(),o("div",Ce,[s[18]||(s[18]=e("div",{class:"grid gap-4 mb-8"},[e("h1",{class:"text-4xl font-semibold text-slate-900"},"Información personal"),e("p",{class:"text-3xl text-slate-800"}," Complete los campos para que podamos conocerte mejor. ")],-1)),e("div",Me,[e("div",Se,[s[14]||(s[14]=e("label",{for:"name"},"Nombre",-1)),h(e("input",{type:"text",placeholder:"Jane",class:p(["form-control",{"form-control--error":i(a).name.$error}]),id:"name","onUpdate:modelValue":s[0]||(s[0]=r=>n.name=r)},null,2),[[S,n.name,void 0,{trim:!0}]]),i(a).name.$error?(t(),o("span",Ve,[(t(!0),o(y,null,k(i(a).name.$errors,r=>(t(),o("p",{key:r.$uid,class:"text-error"},c(r.$message),1))),128))])):v("",!0)]),e("div",Ae,[s[15]||(s[15]=e("label",{for:"lastname"},"Apellidos",-1)),h(e("input",{type:"text",placeholder:"Doe",class:p(["form-control",{"form-control--error":i(a).lastname.$error}]),id:"lastname","onUpdate:modelValue":s[1]||(s[1]=r=>n.lastname=r)},null,2),[[S,n.lastname,void 0,{trim:!0}]]),i(a).lastname.$error?(t(),o("span",Re,[(t(!0),o(y,null,k(i(a).lastname.$errors,r=>(t(),o("p",{key:r.$uid,class:"text-error"},c(r.$message),1))),128))])):v("",!0)])]),e("div",ze,[s[16]||(s[16]=e("label",{for:"phone"},"Teléfono",-1)),h(e("input",{type:"text",placeholder:"8221234442",class:p(["form-control",{"form-control--error":i(a).phone.$error}]),id:"phone","onUpdate:modelValue":s[2]||(s[2]=r=>n.phone=r)},null,2),[[S,n.phone,void 0,{trim:!0}]]),i(a).phone.$error?(t(),o("span",De,[(t(!0),o(y,null,k(i(a).phone.$errors,r=>(t(),o("p",{key:r.$uid,class:"text-error"},c(r.$message),1))),128))])):v("",!0)]),e("div",Pe,[s[17]||(s[17]=e("label",{for:"birthdate"},"Fecha de nacimiento:",-1)),h(e("input",{type:"date",class:p(["form-control",{"form-control--error":i(a).birthdate.$error}]),id:"birthdate",max:q.value,"onUpdate:modelValue":s[3]||(s[3]=r=>n.birthdate=r)},null,10,qe),[[S,n.birthdate]]),i(a).birthdate.$error?(t(),o("span",Ie,[(t(!0),o(y,null,k(i(a).birthdate.$errors,r=>(t(),o("p",{key:r.$uid,class:"text-error"},c(r.$message),1))),128))])):v("",!0)])])):v("",!0),d.value===2?(t(),o("div",Ee,[s[22]||(s[22]=e("div",{class:"grid gap-4 mb-8"},[e("h1",{class:"text-4xl font-semibold text-slate-900"},"Credenciales de la Cuenta"),e("p",{class:"text-3xl text-slate-800"}," Asegúrate de utilizar un correo válido y una contraseña segura. ")],-1)),e("div",je,[s[19]||(s[19]=e("label",{for:"email"},"Correo electrónico:",-1)),h(e("input",{type:"text",placeholder:"janedoe@outlook.com",class:p(["form-control",{"form-control--error":i(a).emailR.$error}]),id:"email","onUpdate:modelValue":s[4]||(s[4]=r=>n.emailR=r)},null,2),[[S,n.emailR,void 0,{trim:!0}]]),i(a).emailR.$error?(t(),o("span",Be,[(t(!0),o(y,null,k(i(a).emailR.$errors,r=>(t(),o("p",{key:r.$uid,class:"text-error"},c(r.$message),1))),128))])):v("",!0)]),e("div",Ue,[s[20]||(s[20]=e("label",{for:"password"},"Contraseña:",-1)),e("div",Fe,[h(e("input",{type:$.value?"text":"password",placeholder:"**********",class:p(["form-control",{"form-control--error":i(a).password.$error||C.value}]),"onUpdate:modelValue":s[5]||(s[5]=r=>n.password=r),onInput:Z,onBlur:W,id:"password"},null,42,Le),[[E,n.password]]),e("button",{type:"button",onClick:O,class:"toggle-btn"},c($.value?"Ocultar":"Mostrar"),1)]),C.value.length?(t(),o("span",He,[e("p",Ne,c(C.value),1)])):v("",!0),i(a).password.$error?(t(),o("span",Oe,[(t(!0),o(y,null,k(i(a).password.$errors,r=>(t(),o("p",{key:r.$uid,class:"text-error"},c(r.$message),1))),128))])):v("",!0),e("div",Ze,[e("div",{class:"strength-meter-fill",style:te({width:P.value+"%"})},null,4)]),e("ul",null,[e("li",{class:p({passed:m.value.lowercaseUppercase})},c(m.value.lowercaseUppercase?"✔":"✖️")+" Incluye mayúsculas y minúsculas ",3),e("li",{class:p({passed:m.value.number})},c(m.value.number?"✔":"✖️")+" Incluye un número ",3),e("li",{class:p({passed:m.value.specialChar})},c(m.value.specialChar?"✔":"✖️")+" Incluye un carácter especial (!@#$%^&*) ",3),e("li",{class:p({passed:m.value.minLength})},c(m.value.minLength?"✔":"✖️")+" Debe contener al menos 12 carácteres ",3)])]),e("div",We,[s[21]||(s[21]=e("label",{for:"repeat-password"},"Confirmar contraseña:",-1)),h(e("input",{type:$.value?"text":"password",placeholder:"**********",class:p(["form-control",{"form-control--error":i(a).repeatPassword.$error}]),id:"repeat-password","onUpdate:modelValue":s[6]||(s[6]=r=>n.repeatPassword=r)},null,10,Te),[[E,n.repeatPassword]]),i(a).repeatPassword.$error?(t(),o("span",Ye,[e("p",Ge,c(i(a).repeatPassword.$errors[0].$message),1)])):v("",!0)])])):v("",!0),d.value===3?(t(),o("div",Je,[s[23]||(s[23]=e("h2",{class:"text-4xl font-semibold"},"Confirmación",-1)),s[24]||(s[24]=e("p",{class:"text-3xl"},"Revise los detalles proporcionados antes de completar el registro.",-1)),e("ul",null,[e("li",null,"Nombre: "+c(n.name),1),e("li",null,"Apellidos: "+c(n.lastname),1),e("li",null,"Teléfono: "+c(n.phone),1),e("li",null,"Fecha de nacimiento: "+c(n.birthdate),1),e("li",null,"Correo electrónico: "+c(n.emailR),1)])])):v("",!0),d.value===4?(t(),o("div",Ke,[s[28]||(s[28]=e("h2",{class:"text-4xl font-semibold"},"Verificación de Email",-1)),s[29]||(s[29]=e("p",{class:"text-3xl"}," Antes de iniciar sesión, necesitarás validar tu correo electrónico. ",-1)),s[30]||(s[30]=e("img",{src:ce,alt:"Mailbox",class:"size-56 mx-auto"},null,-1)),e("p",Qe,[s[25]||(s[25]=V(" Hemos enviado un correo a ")),e("span",Xe,c(n.emailR),1),s[26]||(s[26]=V(" para confirmar la validez de tu correo electrónico. "))]),s[31]||(s[31]=e("p",{class:"text-center"},"Si no recibiste ningún correo, da clic en reenviar código.",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:K},[i(w).isChecking?(t(),o("div",ss,s[27]||(s[27]=[j('<div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div>',6)]))):(t(),o("span",es,"Reenviar correo de confirmación"))])])):v("",!0),d.value<4?(t(),o("div",{key:4,class:p(["form-button",{"form-button--two-columns":d.value>1}])},[h(e("button",{type:"button",onClick:Y,class:"btn btn-outline grid grid-flow-col place-content-center place-items-end gap-4"},[f(i(U),{class:"size-8"}),s[32]||(s[32]=V(" Anterior "))],512),[[z,d.value>1]]),h(e("button",{type:"button",onClick:T,class:"btn btn-primary grid grid-flow-col place-content-center place-items-end gap-4"}," Siguiente ",512),[[z,d.value<3]]),h(e("button",ts,[i(w).isChecking?(t(),o("div",as,s[33]||(s[33]=[j('<div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div><div class="sk-chase-dot" data-v-c27e02e9></div>',6)]))):(t(),o("span",os,"Crear cuenta"))],512),[[z,d.value===3]])],2)):v("",!0)],32)])])}}},ds=de(rs,[["__scopeId","data-v-c27e02e9"]]);export{ds as default};
