import{_ as Z,d as u,e as ee,f as te,a as se,g as a,h as e,s as P,k as m,x as w,w as c,v as C,n as b,i,F as k,j as D,t as n,J as _,q,A as ae,B as T,o as l,l as O}from"./index-QQNkQ_GA.js";import{c as B,r as H,u as le}from"./index-Hc6UlUvy.js";import{r as oe}from"./EyeIcon-BkCCf06Y.js";import{r as re}from"./PencilSquareIcon-DQK73v5h.js";import{r as ie}from"./TrashIcon-hkqqPw9B.js";const ne={key:0,class:"container mx-auto p-4"},de={class:"flex justify-between items-center mb-4"},ue={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ce={class:"bg-white rounded-lg shadow-lg p-6 overflow-y-auto max-md:w-2/3 w-1/3"},ve={class:"mb-4"},me={key:0},pe={class:"mb-4"},ge={key:0},fe={class:"mb-4"},be=["min"],ye={key:0},xe={class:"bg-white rounded-lg shadow-xl w-full md:w-9/12 lg:w-1/3 max-h-[80vh] lg:h-max-2/3"},he={class:"p-6 space-y-6 h-full"},we={class:"text-3xl font-bold text-gray-800 border-b pb-2"},ke={class:"space-y-4 grid place-content-between h-full grid-cols-1"},De={class:"w-full"},$e={class:"text-gray-600 bg-gray-50 p-4 rounded-md"},Ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4 pb-20"},_e={class:"bg-blue-50 p-3 rounded-md"},Ee={class:"text-lg text-blue-900"},Ve={class:"bg-green-50 p-3 rounded-md"},Te={class:"text-lg text-green-900"},Me={class:"bg-purple-50 p-3 rounded-md"},ze={class:"text-lg text-purple-900"},Se={class:"bg-white rounded-lg shadow-lg p-6 overflow-y-auto max-md:w-2/3 w-1/3"},Le={class:"mb-4"},je={key:0},Ae={class:"mb-4"},Fe={key:0},Ue={class:"mb-4"},Ne=["min"],qe={key:0},Oe={class:"mb-4"},Be={class:"flex items-center"},He={class:"flex justify-start items-center mb-4"},Ie={class:"flex items-center space-x-4"},Re={class:"min-w-full bg-white border border-gray-200 shadow-md rounded-lg overflow-hidden"},Je={key:0},Pe={class:"py-2 px-4 border-b border-gray-200"},Xe={class:"py-2 px-4 border-b border-gray-200 truncate max-w-xs"},Ye={class:"py-2 px-4 border-b border-gray-200 truncate max-w-xs"},Ge={class:"py-2 px-4 border-b border-gray-200 truncate max-w-xs"},Ke={class:"py-2 px-4 border-b border-gray-200"},Qe={class:"py-2 px-4 border-b border-gray-200"},We={class:"py-2 px-4 border-b border-gray-200 max-w-xs"},Ze=["onClick"],et=["onClick","disabled"],tt=["onClick","disabled"],st={class:"text-4xl mt-12 text-center"},at={key:1,class:"h-screen mt-32"},lt={__name:"LegalDisclaimer",setup(ot){const M=u(!1),z=u(!1),S=u(!1),y=u(null),v=u(!1),p=u(""),g=u(""),f=u(""),I=new Date().toISOString().split("T")[0],h=u([]),$=u(!1),E=u(!1),X={disclaimerTitle:{$autoDirty:!0,required:B.withMessage("Este campo es obligatorio",H)},disclaimerContent:{$autoDirty:!0,required:B.withMessage("Este campo es obligatorio",H)},disclaimerEffectiveDate:{$autoDirty:!0,required:B.withMessage("Este campo es obligatorio",H)}},V=ee.useToast(),r=le(X,{disclaimerTitle:p,disclaimerContent:g,disclaimerEffectiveDate:f}),x=u("all"),Y=async o=>{try{if(!confirm("¿Estás seguro de que deseas eliminar este descargo?"))return;v.value=!0;const s=await T.delete(`/dr/legal-disclaimer/${o}`,{status:"eliminada"});console.log("Descargo marcado como eliminado exitosamente:",s.data);const d=h.value.findIndex(N=>N.id===o);d!==-1&&(h.value[d].status="eliminada"),v.value=!1}catch(t){v.value=!1,console.error("Error al eliminar el descargo legal:",t.message)}},G=async()=>{var o,t;if(r.value.$touch(),!r.value.$invalid)try{v.value=!0;const s={title:p.value,content:g.value,effectiveDate:f.value,isCurrent:$.value==="true"},d=await T.put(`/dr/legal-disclaimer/${y.value.id}`,s);console.log("Descargo actualizado con éxito:",d.data),await F(),v.value=!1,V.open({message:d.data.message,type:"success",duration:4e3,pauseOnHover:!0}),j()}catch(s){v.value=!1;const d=((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.message)||"Error al actualizar el descargo legal.";V.open({message:d,type:"error",duration:4e3,pauseOnHover:!0})}},K=o=>{y.value=o,p.value=o.title,g.value=o.content;const t=new Date(o.effectiveDate),s=t.getFullYear(),d=String(t.getMonth()+1).padStart(2,"0"),N=String(t.getDate()).padStart(2,"0");f.value=`${s}-${d}-${N}`,M.value=!0},L=()=>{z.value=!1,p.value="",g.value="",f.value="",r.value.$reset()},R=()=>{S.value=!1,y.value=null},j=()=>{p.value="",g.value="",f.value="",$.value="false",M.value=!1,r.value.$reset()},Q=o=>{y.value=o,S.value=!0},W=async()=>{if(r.value.$touch(),!r.value.$invalid)try{v.value=!0;const{data:o}=await T.post("/dr/legal-disclaimer",{title:p.value,content:g.value,effectiveDate:f.value});console.log(o),await F(),v.value=!1,V.open({message:o.message,type:"success",duration:4e3,pauseOnHover:!0}),L()}catch(o){v.value=!1;const t=o.response.data.message;V.open({message:t,type:"error",duration:4e3,pauseOnHover:!0})}},A=()=>{},J=te(()=>x.value==="all"?h.value:h.value.filter(o=>o.status===x.value)),F=async()=>{try{E.value=!0,h.value=[];const o=await T.get("/dr/legal-disclaimer");h.value=o.data,E.value=!1}catch(o){E.value=!1,console.error("Error al obtener los descargos legales:",o)}},U=o=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString("es-MX",t)};return se(async()=>{await F()}),(o,t)=>E.value?(l(),a("div",at,t[36]||(t[36]=[P('<div class="sk-chase w-24 h-24 mx-auto" data-v-5a68246c><div class="sk-chase-dot before:bg-slate-900" data-v-5a68246c></div><div class="sk-chase-dot before:bg-slate-900" data-v-5a68246c></div><div class="sk-chase-dot before:bg-slate-900" data-v-5a68246c></div><div class="sk-chase-dot before:bg-slate-900" data-v-5a68246c></div><div class="sk-chase-dot before:bg-slate-900" data-v-5a68246c></div><div class="sk-chase-dot before:bg-slate-900" data-v-5a68246c></div></div>',1)]))):(l(),a("div",ne,[e("div",de,[t[12]||(t[12]=e("h1",{class:"text-2xl font-bold"},"Listado de Deslindes Legales",-1)),e("button",{onClick:t[0]||(t[0]=s=>z.value=!0),class:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700"}," + Agregar Deslinde Legal ")]),v.value?(l(),a("div",ue,t[13]||(t[13]=[P('<div class="sk-chase w-24 h-24" data-v-5a68246c><div class="sk-chase-dot" data-v-5a68246c></div><div class="sk-chase-dot" data-v-5a68246c></div><div class="sk-chase-dot" data-v-5a68246c></div><div class="sk-chase-dot" data-v-5a68246c></div><div class="sk-chase-dot" data-v-5a68246c></div><div class="sk-chase-dot" data-v-5a68246c></div></div>',1)]))):m("",!0),z.value?(l(),a("div",{key:1,onClick:w(L,["self"]),class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},[e("div",ce,[t[18]||(t[18]=e("h2",{class:"text-2xl font-bold mb-4"},"Agregar Deslinde Legal",-1)),e("form",{onSubmit:w(W,["prevent"])},[e("div",ve,[t[14]||(t[14]=e("label",{for:"disclaimerTitle",class:"block text-gray-700 font-medium"},"Título",-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),id:"disclaimerTitle",type:"text",class:b([{"form-control--error":i(r).disclaimerTitle.$error},"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-purple-600"])},null,2),[[C,p.value]]),i(r).disclaimerTitle.$error?(l(),a("span",me,[(l(!0),a(k,null,D(i(r).disclaimerTitle.$errors,s=>(l(),a("p",{key:s.$uid,class:"text-error"},n(s.$message),1))),128))])):m("",!0)]),e("div",pe,[t[15]||(t[15]=e("label",{for:"disclaimerContent",class:"block text-gray-700 font-medium"},"Contenido",-1)),c(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),id:"disclaimerContent",class:b(["w-full p-2 h-40 border rounded focus:outline-none focus:ring-2 focus:ring-purple-600 overflow-y-scroll resize-none",{"form-control--error":i(r).disclaimerContent.$error}])},null,2),[[C,g.value]]),i(r).disclaimerContent.$error?(l(),a("span",ge,[(l(!0),a(k,null,D(i(r).disclaimerContent.$errors,s=>(l(),a("p",{key:s.$uid,class:"text-error"},n(s.$message),1))),128))])):m("",!0)]),e("div",fe,[t[16]||(t[16]=e("label",{for:"disclaimerEffectiveDate",class:"block text-gray-700 font-medium"},"Fecha de Vigencia",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),min:i(I),id:"disclaimerEffectiveDate",type:"date",class:b(["w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-purple-600",{"form-control--error":i(r).disclaimerEffectiveDate.$error}])},null,10,be),[[C,f.value]]),i(r).disclaimerEffectiveDate.$error?(l(),a("span",ye,[(l(!0),a(k,null,D(i(r).disclaimerEffectiveDate.$errors,s=>(l(),a("p",{key:s.$uid,class:"text-error"},n(s.$message),1))),128))])):m("",!0)]),e("div",{class:"flex justify-between items-center"},[e("button",{type:"button",onClick:L,class:"text-red-600 hover:text-red-800"}," Cancelar "),t[17]||(t[17]=e("button",{type:"submit",class:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700"}," Crear Deslinde Legal ",-1))])],32)])])):m("",!0),S.value?(l(),a("div",{key:2,onClick:w(R,["self"]),class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},[e("div",xe,[e("div",he,[e("h2",we,n(y.value.title),1),e("div",ke,[e("div",De,[t[19]||(t[19]=e("h3",{class:"text-lg font-semibold text-gray-700 mb-2"},"Contenido:",-1)),e("p",$e,n(y.value.content),1)]),e("div",Ce,[e("div",_e,[t[20]||(t[20]=e("p",{class:"text-sm font-medium text-blue-800"},"Fecha de Vigencia",-1)),e("p",Ee,n(U(y.value.effectiveDate)),1)]),e("div",Ve,[t[21]||(t[21]=e("p",{class:"text-sm font-medium text-green-800"},"Fecha de Creación",-1)),e("p",Te,n(U(y.value.createdAt)),1)]),e("div",Me,[t[22]||(t[22]=e("p",{class:"text-sm font-medium text-purple-800"},"Última Actualización",-1)),e("p",ze,n(U(y.value.updatedAt)),1)])])])]),e("div",{class:"bg-gray-50 flex justify-end p-4"},[e("button",{onClick:R,class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition duration-200 ease-in-out transform hover:scale-105"}," Cerrar ")])])])):m("",!0),M.value?(l(),a("div",{key:3,onClick:w(j,["self"]),class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},[e("div",Se,[t[30]||(t[30]=e("h2",{class:"text-2xl font-bold mb-4"},"Editar Deslinde Legal",-1)),e("form",{onSubmit:w(G,["prevent"])},[e("div",Le,[t[23]||(t[23]=e("label",{for:"disclaimerTitle",class:"block text-gray-700 font-medium"},"Título",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>p.value=s),id:"disclaimerTitle",type:"text",class:b([{"form-control--error":i(r).disclaimerTitle.$error},"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-purple-600"])},null,2),[[C,p.value]]),i(r).disclaimerTitle.$error?(l(),a("span",je,[(l(!0),a(k,null,D(i(r).disclaimerTitle.$errors,s=>(l(),a("p",{key:s.$uid,class:"text-error"},n(s.$message),1))),128))])):m("",!0)]),e("div",Ae,[t[24]||(t[24]=e("label",{for:"disclaimerContent",class:"block text-gray-700 font-medium"},"Contenido",-1)),c(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>g.value=s),id:"disclaimerContent",class:b(["w-full p-2 h-40 border rounded focus:outline-none focus:ring-2 focus:ring-purple-600 overflow-y-scroll resize-none",{"form-control--error":i(r).disclaimerContent.$error}])},null,2),[[C,g.value]]),i(r).disclaimerContent.$error?(l(),a("span",Fe,[(l(!0),a(k,null,D(i(r).disclaimerContent.$errors,s=>(l(),a("p",{key:s.$uid,class:"text-error"},n(s.$message),1))),128))])):m("",!0)]),e("div",Ue,[t[25]||(t[25]=e("label",{for:"disclaimerEffectiveDate",class:"block text-gray-700 font-medium"},"Fecha de Vigencia",-1)),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>f.value=s),min:i(I),id:"disclaimerEffectiveDate",type:"date",class:b(["w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-purple-600",{"form-control--error":i(r).disclaimerEffectiveDate.$error}])},null,10,Ne),[[C,f.value]]),i(r).disclaimerEffectiveDate.$error?(l(),a("span",qe,[(l(!0),a(k,null,D(i(r).disclaimerEffectiveDate.$errors,s=>(l(),a("p",{key:s.$uid,class:"text-error"},n(s.$message),1))),128))])):m("",!0)]),e("div",Oe,[t[28]||(t[28]=e("label",{class:"block text-gray-700 font-medium"},"¿Esta versión es vigente?",-1)),e("div",Be,[c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>$.value=s),type:"radio",value:"true",id:"current-yes",class:"mr-2"},null,512),[[_,$.value]]),t[26]||(t[26]=e("label",{for:"current-yes",class:"mr-4"},"Sí",-1)),c(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>$.value=s),type:"radio",value:"false",id:"current-no",class:"mr-2"},null,512),[[_,$.value]]),t[27]||(t[27]=e("label",{for:"current-no"},"No",-1))])]),e("div",{class:"flex justify-between items-center"},[e("button",{type:"button",onClick:j,class:"text-red-600 hover:text-red-800"}," Cancelar "),t[29]||(t[29]=e("button",{type:"submit",class:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700"}," Actualizar Deslinde Legal ",-1))])],32)])])):m("",!0),e("div",He,[t[34]||(t[34]=e("label",{class:"mr-4 text-gray-700 font-medium"},"Filtrar por estado:",-1)),e("div",Ie,[e("label",null,[c(e("input",{type:"radio",value:"all","onUpdate:modelValue":t[9]||(t[9]=s=>x.value=s),onChange:A},null,544),[[_,x.value]]),t[31]||(t[31]=q(" Todos "))]),e("label",null,[c(e("input",{type:"radio",value:"no vigente","onUpdate:modelValue":t[10]||(t[10]=s=>x.value=s),onChange:A},null,544),[[_,x.value]]),t[32]||(t[32]=q(" No vigente "))]),e("label",null,[c(e("input",{type:"radio",value:"eliminada","onUpdate:modelValue":t[11]||(t[11]=s=>x.value=s),onChange:A},null,544),[[_,x.value]]),t[33]||(t[33]=q(" Eliminada "))])])]),e("table",Re,[t[35]||(t[35]=e("thead",null,[e("tr",{class:"bg-gray-100 text-left"},[e("th",{class:"py-2 px-4 border-b border-gray-200"},"Fecha de Creación"),e("th",{class:"py-2 px-4 border-b border-gray-200"},"Versión"),e("th",{class:"py-2 px-4 border-b border-gray-200"},"Título"),e("th",{class:"py-2 px-4 border-b border-gray-200"},"Contenido"),e("th",{class:"py-2 px-4 border-b border-gray-200"},"Estado"),e("th",{class:"py-2 px-4 border-b border-gray-200"},"Fecha de vigencia"),e("th",{class:"py-2 px-4 border-b border-gray-200"},"Acciones")])],-1)),J.value.length>0&&!v.value?(l(),a("tbody",Je,[(l(!0),a(k,null,D(J.value,s=>(l(),a("tr",{key:s.id,class:b(["hover:bg-gray-50",s.status==="vigente"?"bg-gray-200":""])},[e("td",Pe,n(new Date(s.createdAt).toLocaleDateString()),1),e("td",Xe,n(s.version),1),e("td",Ye,n(s.title),1),e("td",Ge,n(s.content),1),e("td",Ke,[e("span",{class:b([{"bg-green text-green-600":s.status==="vigente","text-yellow-600":s.status==="no vigente","text-red-600":s.status==="eliminada"},"capitalize"])},n(s.status),3)]),e("td",Qe,n(new Date(s.effectiveDate).toLocaleDateString()),1),e("td",We,[e("button",{onClick:d=>Q(s),class:"text-slate-600 hover:text-slate-800 mr-2"},[O(i(oe),{class:"size-8"})],8,Ze),e("button",{onClick:w(d=>K(s),["prevent"]),class:b(["text-blue-600 hover:text-blue-800 mr-2",{"opacity-50 cursor-not-allowed":s.status==="eliminada"}]),disabled:s.status==="eliminada"},[O(i(re),{class:"size-8"})],10,et),e("button",{onClick:w(d=>Y(s.id),["prevent"]),class:b(["text-red-600 hover:text-red-800",{"opacity-50 cursor-not-allowed":s.status==="eliminada"}]),disabled:s.status==="eliminada"},[O(i(ie),{class:"size-8"})],10,tt)])],2))),128))])):m("",!0)]),c(e("h1",st," Aún no hay registros de deslindes legales, agrega uno para empezar a listar. ",512),[[ae,h.value.length===0]])]))}},ct=Z(lt,[["__scopeId","data-v-5a68246c"]]);export{ct as default};
